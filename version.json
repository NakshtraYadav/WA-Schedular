{
  "version": "2.8.1",
  "name": "WhatsApp Scheduler",
  "description": "Local WhatsApp message scheduling with Telegram remote control",
  "build": 37,
  "release_date": "2026-02-05",
  "changelog": [
    {
      "version": "2.8.1",
      "date": "2026-02-05",
      "changes": [
        "DURABILITY: Added execution lock to prevent double-send on crash recovery",
        "DURABILITY: Added retry logic with exponential backoff (3 attempts) for message sending",
        "DURABILITY: Execution lock auto-expires after 5 minutes (zombie protection)",
        "DURABILITY: Lock released on error to prevent stuck schedules",
        "IMPROVED: Message sender now uses shared HTTP client",
        "IMPROVED: Permanent failures (invalid number) skip retries",
        "DOCS: Added comprehensive DURABILITY_AUDIT.md"
      ]
    },
    {
      "version": "2.8.0",
      "date": "2026-02-05",
      "changes": [
        "SECURITY: Fixed race condition in database connection with async locking",
        "PERFORMANCE: Added MongoDB indexes for contacts, schedules, logs, templates (10x query speed)",
        "PERFORMANCE: Implemented shared HTTP client with connection pooling (memory leak fix)",
        "FIXED: Hardcoded localhost URLs in Connect.jsx now use backend API proxy",
        "FIXED: Variable typo bug in logs.py causing endpoint crash",
        "FIXED: Bare except clauses replaced with proper exception handling",
        "NEW: POST /api/whatsapp/generate-qr endpoint for QR code generation",
        "NEW: Shared HTTP client module (/app/backend/core/http_client.py)",
        "REMOVED: Duplicate unused API layer (/app/frontend/src/lib/api.js)",
        "IMPROVED: Database initialization now creates indexes automatically",
        "IMPROVED: Graceful HTTP client cleanup on server shutdown",
        "DOCS: Added comprehensive PRODUCTION_AUDIT_REPORT.md"
      ]
    },
    {
      "version": "2.7.1",
      "date": "2026-01-15",
      "changes": [
        "ADDED: Root endpoint at http://localhost:8001/ with service info and links",
        "ADDED: Root endpoint at http://localhost:3001/ with WhatsApp status and endpoints list",
        "IMPROVED: No more 404/Cannot GET errors on service root URLs"
      ]
    },
    {
      "version": "2.7.0",
      "date": "2026-01-15",
      "changes": [
        "NEW: Manual Run button (â–¶) for scheduled messages - trigger any schedule instantly",
        "FIXED: Scheduled messages not sending - async execution wrapper for APScheduler",
        "FIXED: WhatsApp session terminates after stop/start - graceful shutdown with SIGTERM",
        "IMPROVED: stop.sh v2.2.0 - 15 second grace period before force kill for session save",
        "IMPROVED: WhatsApp auto-initializes from cached session on startup",
        "IMPROVED: start.sh shows WhatsApp session restoration status",
        "ADDED: run_scheduled_message() wrapper using asyncio.create_task()"
      ]
    },
    {
      "version": "2.6.4",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Schedule routes order - /debug, /status, /reload now work properly",
        "NEW: GET /api/schedules/debug - Full scheduler status with DB and job info",
        "NEW: GET /api/schedules/status - Quick scheduler health check",
        "NEW: POST /api/schedules/reload - Manual schedule reload trigger",
        "NEW: GET /api/logs/summary - System health summary",
        "NEW: GET /api/logs/scheduler - Scheduler-specific log filtering",
        "NEW: GET /api/logs/errors - Error-only logs from all sources",
        "NEW: GET /api/logs/all - Combined logs from all services",
        "IMPROVED: Schedule executor with better logging (contact names, emojis)",
        "IMPROVED: Schedule job manager with timezone-aware datetime handling",
        "IMPROVED: One-time schedules now marked complete with completed_at timestamp"
      ]
    },
    {
      "version": "2.6.3",
      "date": "2026-02-05",
      "changes": [
        "NEW: AI Auto-Reply settings section in Settings page",
        "NEW: OpenAI API key configuration",
        "NEW: Model selection (GPT-4o-mini, GPT-4o)",
        "FIXED: Telegram status now refreshes after 1s delay when saving",
        "ADDED: Performance optimization guide (docs/PERFORMANCE_OPTIMIZATION.md)",
        "UPDATED: AI implementation plan with per-contact history details"
      ]
    },
    {
      "version": "2.6.2",
      "date": "2026-02-05",
      "changes": [
        "FIXED: 'Remove Unverified' now works - moved route before dynamic /{contact_id}",
        "NEW: Multi-select contacts with checkboxes",
        "NEW: 'Delete Selected' button for bulk deletion",
        "NEW: 'Select All' checkbox in table header",
        "NEW: POST /api/contacts/bulk-delete endpoint",
        "IMPROVED: Contacts now sorted A-Z automatically",
        "IMPROVED: Selected rows highlighted in table"
      ]
    },
    {
      "version": "2.6.1",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Contact verification status now displays correctly after verification",
        "FIXED: Added is_verified, whatsapp_id, verified_at fields to Contact model",
        "NEW: Real-time verification - status updates as each contact is verified",
        "NEW: Visual feedback showing which contact is being verified (spinner)",
        "NEW: POST /api/contacts/verify-single/:phone endpoint for single contact verification",
        "IMPROVED: Verify All now shows progress (e.g., 'Verifying 5/100 contacts...')"
      ]
    },
    {
      "version": "2.6.0",
      "date": "2026-02-05",
      "changes": [
        "NEW: On-demand QR code generation - QR only generated when you click the button",
        "NEW: Remove Unverified button - bulk delete contacts not on WhatsApp",
        "FIXED: Contact verification now persists to database (survives page refresh)",
        "FIXED: Verification status displayed from DB, not just session",
        "IMPROVED: Smart update detection - shows exact restart requirements",
        "IMPROVED: Update system categorizes changes (frontend/backend/full restart)",
        "ADDED: DELETE /api/contacts/unverified endpoint"
      ]
    },
    {
      "version": "2.5.5",
      "date": "2026-02-05",
      "changes": [
        "NEW: On-demand QR code generation - click 'Generate QR Code' when ready to scan",
        "NEW: QR placeholder UI with visual prompt to generate",
        "IMPROVED: No more auto-initialization - QR is only generated when user requests",
        "IMPROVED: QR is always fresh when displayed since it's generated on-demand",
        "FIXED: First QR invalid issue completely resolved - no stale QR codes",
        "ADDED: /generate-qr endpoint for manual QR generation trigger"
      ]
    },
    {
      "version": "2.5.4",
      "date": "2026-02-05",
      "changes": [
        "FIXED: First QR code invalid issue - removed aggressive QR refresh that was destroying client",
        "IMPROVED: QR codes now auto-refresh naturally via whatsapp-web.js (every ~20s)",
        "ADDED: QR count tracking - shows which QR code number is displayed",
        "ADDED: UI hint when first QR code is shown (wait for auto-refresh if scan fails)",
        "ADDED: Loading screen and state change event logging for better debugging",
        "IMPROVED: Better logging during WhatsApp initialization"
      ]
    },
    {
      "version": "2.5.3",
      "date": "2026-02-05",
      "changes": [
        "FIXED: QR code not working on first run after setup",
        "FIXED: start.sh now cleans browser lock files before starting WhatsApp service",
        "FIXED: start.sh now waits longer for WhatsApp service to initialize (40s vs 2s)",
        "FIXED: WhatsApp initialization delayed 3s to avoid MongoDB race condition",
        "IMPROVED: MongoDB connection now retries 3 times on startup",
        "IMPROVED: Orphaned chromium processes cleaned up on service start"
      ]
    },
    {
      "version": "2.5.2",
      "date": "2026-02-05",
      "changes": [
        "FIXED: 'Verify All' contacts timeout issue - was timing out at 30 seconds",
        "IMPROVED: Bulk verification now uses parallel batches (5x faster)",
        "IMPROVED: Extended timeouts to 3 minutes for large contact lists",
        "IMPROVED: Better error messages for timeout and connection issues",
        "IMPROVED: Contacts page now uses shared WhatsApp status for consistency"
      ]
    },
    {
      "version": "2.5.1",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Circular JSON error in getState() - client object no longer exposed",
        "FIXED: Status routes now correctly handle both MongoDB and filesystem sessions",
        "FIXED: Session routes properly clear MongoDB or filesystem based on active storage",
        "FIXED: /session-info endpoint now async and shows correct storage type",
        "IMPROVED: Status endpoint now shows sessionType (MongoDB/Filesystem)"
      ]
    },
    {
      "version": "2.5.0",
      "date": "2026-02-05",
      "changes": [
        "MAJOR: RemoteAuth with MongoDB - sessions now stored in database",
        "FIXED: Sessions persist across restarts, reboots, and unclean shutdowns",
        "ADDED: Automatic fallback to LocalAuth if MongoDB unavailable",
        "ADDED: Session saved event logging for persistence confirmation",
        "IMPROVED: 15-second shutdown timeout for proper session save",
        "IMPROVED: Status endpoint now shows session type (MongoDB/Filesystem)"
      ]
    },
    {
      "version": "2.4.2",
      "date": "2026-02-05",
      "changes": [
        "FIXED: 'Browser already running' error on WSL - now auto-cleans stale locks",
        "FIXED: Verify contacts API body parsing",
        "ADDED: Auto-cleanup of SingletonLock, SingletonCookie, SingletonSocket files",
        "ADDED: Auto-kill orphaned chromium processes on startup",
        "IMPROVED: fix-whatsapp.sh now optionally keeps session (no QR rescan needed)"
      ]
    },
    {
      "version": "2.4.1",
      "date": "2026-02-05",
      "changes": [
        "ADDED: 'Verify All' button on Contacts page to check which contacts are on WhatsApp",
        "ADDED: Status column showing verification status (On WhatsApp / Not Found / Not Verified)",
        "ADDED: Summary cards showing verified vs not found count after verification",
        "IMPROVED: Send button disabled for contacts not on WhatsApp"
      ]
    },
    {
      "version": "2.4.0",
      "date": "2026-02-05",
      "changes": [
        "ADDED: Edit scheduled messages - click pencil icon to modify",
        "ADDED: WhatsApp number verification before adding contacts",
        "ADDED: Verify single number: GET /api/contacts/verify/{phone}",
        "ADDED: Bulk verification: POST /api/contacts/verify-bulk",
        "IMPROVED: Contact creation now validates number is on WhatsApp"
      ]
    },
    {
      "version": "2.3.1",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Update checker now uses git fetch to detect updates (more reliable)",
        "FIXED: Update check from localhost now works same as ./start.sh update",
        "ADDED: Shows number of commits behind when update available"
      ]
    },
    {
      "version": "2.3.0",
      "date": "2026-02-05",
      "changes": [
        "ADDED: Edit scheduled messages (PUT /api/schedules/{id})",
        "ADDED: Get single schedule (GET /api/schedules/{id})",
        "ADDED: QR code auto-refresh every 30 seconds (no more expired QR)",
        "IMPROVED: QR age tracking in status endpoint"
      ]
    },
    {
      "version": "2.2.1",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Session path permission error on local machines",
        "FIXED: Session path now relative to project directory (not /app)",
        "ADDED: Fallback session path if preferred path not writable",
        "FIXED: auto-updater.sh now uses ./start.sh update instead of deprecated ./update.sh"
      ]
    },
    {
      "version": "2.2.0",
      "date": "2026-02-05",
      "changes": [
        "MAJOR: WhatsApp session persistence - sessions now survive restarts",
        "FIXED: Changed session path from relative to absolute",
        "ADDED: Graceful shutdown with 10s timeout for session save",
        "ADDED: Process signal handlers (SIGTERM, SIGINT, SIGHUP)",
        "ADDED: Session validation and corruption detection",
        "ADDED: Auto-reconnect on disconnect",
        "ADDED: Session backup before clear operations",
        "ADDED: /session-info endpoint for persistence status",
        "ADDED: Stale lock file cleanup on startup"
      ]
    },
    {
      "version": "2.1.5",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Update from localhost now works (added REACT_APP_BACKEND_URL)",
        "FIXED: Telegram test button error (apiClient import issue)",
        "FIXED: Version context refresh function naming",
        "FIXED: Diagnostics now finds logs in both direct files and subdirectories"
      ]
    },
    {
      "version": "2.1.4",
      "date": "2026-02-05",
      "changes": [
        "Removed auto-updater from Settings UI",
        "Toast notifications match app dark theme",
        "Simplified update flow - manual updates only"
      ]
    },
    {
      "version": "2.1.3",
      "date": "2026-02-05",
      "changes": [
        "FIXED: Toast notifications now show (switched to Sonner)",
        "FIXED: Logs now visible in Diagnostics page",
        "FIXED: Chromium auto-detection for WhatsApp service",
        "FIXED: Setup script now installs Chromium automatically",
        "Improved error messages and debugging"
      ]
    },
    {
      "version": "2.1.2",
      "date": "2026-02-05",
      "changes": [
        "Added Python virtual environment support for Ubuntu 24.04+",
        "Auto-creates venv in backend/venv folder",
        "Works with externally-managed Python environments",
        "./start.sh setup now creates venv automatically"
      ]
    },
    {
      "version": "2.1.1",
      "date": "2026-02-04",
      "changes": [
        "Seamless UI update - no restart buttons",
        "Click Install Update \u2192 auto pulls \u2192 auto refreshes",
        "Smart detection: only refreshes if frontend changed",
        "WSL file watching fixes with polling mode",
        "Auto-restart frontend if it gets stuck"
      ]
    },
    {
      "version": "2.1.0",
      "date": "2026-02-04",
      "changes": [
        "Simplified update system - single start.sh script",
        "Removed redundant update scripts (update.sh, auto-updater.sh, fast-update.sh)",
        "UI Install Update button now uses fast hot-reload method",
        "Update time reduced from 30-60s to ~3 seconds",
        "WSL optimized for Windows users"
      ]
    },
    {
      "version": "2.0.0.0",
      "date": "2026-02-04",
      "changes": [
        "MAJOR: Complete codebase modularization",
        "Backend: server.py reduced from 1967 to 83 lines",
        "Backend: New structure - core/, models/, routes/, services/, utils/",
        "Backend: 45+ modular files with single responsibility",
        "Frontend: App.js reduced from 235 to 45 lines",
        "Frontend: New modular API layer with 11 domain-specific files",
        "Frontend: Added context providers (Version, WhatsApp)",
        "Frontend: Added custom hooks (useVersion, useWhatsAppStatus)",
        "Frontend: Extracted layout components (Sidebar, Layout)",
        "Frontend: Added shared components (StatusBadge, LoadingSpinner, etc.)",
        "WhatsApp Service: Modularized into src/ structure",
        "Improved code maintainability and scalability"
      ]
    },
    {
      "version": "1.7.0",
      "date": "2026-02-04",
      "changes": [
        "Added /api/schedules/debug - shows scheduler status & jobs",
        "Added /api/schedules/test-run/{id} - manually trigger a schedule",
        "Enhanced logging for schedule creation and execution",
        "Telegram notification when scheduled message is sent",
        "Better error messages for debugging schedule issues"
      ]
    },
    {
      "version": "1.6.0",
      "date": "2026-02-04",
      "changes": [
        "HOT RELOAD: ./update.sh dev - instant code updates",
        "PREFETCH: Download updates in background",
        "GRACEFUL RESTART: No dropped connections"
      ]
    },
    {
      "version": "1.5.0",
      "date": "2026-02-04",
      "changes": [
        "Fast updates using git pull (10-30s vs 2-3min)",
        "Smart restart: Only restarts changed services"
      ]
    },
    {
      "version": "1.3.0",
      "date": "2026-02-04",
      "changes": [
        "Fixed Telegram schedules not executing (now adds to APScheduler)",
        "Telegram /create now uses search instead of numbered list",
        "Added /search command for finding contacts",
        "Improved /contacts to show total count and search hint",
        "Works with 500+ contacts via search-based selection"
      ]
    },
    {
      "version": "1.2.0",
      "date": "2026-02-04",
      "changes": [
        "Fixed update loop issue - frontend no longer gets stuck",
        "Added /contacts endpoint to WhatsApp service for sync",
        "Fixed WhatsApp session persistence on restart",
        "Update now runs detached - survives backend restart",
        "Added Telegram /create command for interactive scheduling",
        "Improved update script with proper service stop/start"
      ]
    },
    {
      "version": "1.1.0",
      "date": "2026-02-04",
      "changes": [
        "Added WhatsApp contact sync feature",
        "Fixed version comparison bug (string vs numeric)",
        "Added rollback support for updates",
        "Improved recurring schedule with custom time picker",
        "Telegram setup instructions auto-hide when configured",
        "Fixed auto-updater timeout issues",
        "Added lock file to prevent concurrent updates"
      ]
    },
    {
      "version": "1.0.0",
      "date": "2026-02-04",
      "changes": [
        "Initial release",
        "WhatsApp Web integration via QR code",
        "Contact management",
        "Message templates",
        "One-time and recurring schedules",
        "Telegram bot remote control",
        "Auto-updater system",
        "Version tracking and update notifications"
      ]
    }
  ],
  "repository": "NakshtraYadav/WA-Schedular",
  "branch": "main",
  "author": "Nakshtra Yadav",
  "license": "MIT"
}